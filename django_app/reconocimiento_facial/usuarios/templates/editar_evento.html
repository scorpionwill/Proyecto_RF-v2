{% extends 'base.html' %}
{% load static %}

{% block title %}Editar Evento{% endblock %}

{% block content %}
<div class="container">
    <h1>Editar Evento</h1>

    <!-- Mostrar mensajes de Django (errores, éxitos, etc.) -->
    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-danger alert-dismissible fade show text-center" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
    </div>
    {% endfor %}
    {% endif %}

    <!-- Si la vista envía un mensaje de error directo -->
    {% if error %}
    <div class="alert alert-danger text-center">
        {{ error }}
    </div>
    {% endif %}

    <!-- Formulario para editar un evento existente. Los datos se envían con el método POST. -->
    <form method="POST">
        <!-- Token de seguridad CSRF -->
        {% csrf_token %}
        <!-- Campo oculto que contiene el ID del evento para identificarlo en el servidor -->
        <input type="hidden" name="id" value="{{ evento.id }}">

        <!-- Campo para el nombre del evento, pre-rellenado con el valor actual -->
        <div class="mb-3">
            <label for="nom_evento" class="form-label">Nombre del Evento:</label>
            <input type="text" class="form-control" id="nom_evento" name="nom_evento" value="{{ evento.nombre }}"
                required>
        </div>

        <!-- Campo para la fecha, pre-rellenado con la fecha actual del evento -->
        <div class="mb-3">
            <label for="fecha" class="form-label">Fecha:</label>
            <input type="date" class="form-control" id="fecha" name="fecha" value="{{ evento.fecha }}" required>
        </div>

        <!-- Campos para hora de inicio y fin -->
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="hora_inicio" class="form-label">Hora Inicio:</label>
                <input type="time" class="form-control" id="hora_inicio" name="hora_inicio"
                    value="{{ evento.hora_inicio }}" required>
            </div>
            <div class="col-md-6">
                <label for="hora_fin" class="form-label">Hora Fin:</label>
                <input type="time" class="form-control" id="hora_fin" name="hora_fin" value="{{ evento.hora_fin }}"
                    required>
            </div>
        </div>

        <!-- Campo para la ubicación -->
        <div class="mb-3">
            <label for="ubicacion" class="form-label">Ubicación:</label>
            <input type="text" class="form-control" id="ubicacion" name="ubicacion" value="{{ evento.ubicacion }}"
                placeholder="Ej. Sala A-201, Auditorio Principal" required>
        </div>

        <!-- Campo para el relator, pre-rellenado con el valor actual -->
        <div class="mb-3">
            <label for="relator" class="form-label">Relator:</label>
            <input type="text" class="form-control" id="relator" name="relator" value="{{ evento.relator }}" required>
        </div>

        <!-- Campo para la descripción, pre-rellenado con el valor actual -->
        <div class="mb-3">
            <label for="descripcion" class="form-label">Descripción:</label>
            <textarea class="form-control" id="descripcion" name="descripcion" rows="4"
                required>{{ evento.descripcion }}</textarea>
        </div>

        <!-- Botones de acción -->
        <div class="text-center">
            <!-- Botón para guardar los cambios -->
            <button type="submit" class="btn w-100 py-2">Actualizar Evento</button>
            <!-- Enlace para volver a la lista de eventos sin guardar -->
            <a href="{% url 'listar_eventos' %}" class="btn back-btn w-100 py-2 my-3">Volver a la Lista de Eventos</a>
        </div>
    </form>
</div>
{% endblock %}