{% load static %}

<!-- Sidebar -->
<div id="sidebar-wrapper">
    <!-- Logo y título del sidebar con enlace completo -->
    <a href="{% url 'pagina_inicio' %}" class="sidebar-header-link text-decoration-none">
        <div class="d-flex align-items-center justify-content-center py-3 border-bottom border-light">
            <img src="{% static 'images/inacap.jpeg' %}" alt="Logo INACAP" style="width: 40px; height: 40px;"
                class="me-2">
            <h2 class="mb-0 text-white">
                {% if user.is_staff %}Admin Panel{% else %}Panel Encargado{% endif %}
            </h2>
        </div>
    </a>

    <!-- Indicador de usuario logueado -->
    <div class="user-info px-3 py-2 border-bottom border-light">
        <small class="text-white-50">Sesión activa:</small>
        <div class="text-white fw-bold">
            <i class="bi bi-person-circle"></i> {{ user.username }}
        </div>
        <small class="text-white-50">
            {% if user.is_staff %}
            <i class="bi bi-shield-fill-check text-warning"></i> Administrador
            {% else %}
            <i class="bi bi-person-badge text-info"></i> Encargado
            {% endif %}
        </small>
    </div>

    <!-- Menú de navegación -->
    <nav class="nav flex-column p-3">
        <!-- Botón de Inicio -->
        <a href="{% url 'pagina_inicio' %}" class="nav-link text-white">
            <i class="bi bi-house-door-fill"></i> Inicio
        </a>

        {% if user.is_staff %}
        <!-- OPCIONES SOLO PARA ADMIN -->

        <!-- Nuevo Registro Biométrico -->
        <a href="{% url 'registro_biometrico' %}" class="nav-link text-white">
            <i class="bi bi-camera-fill"></i> Registro Biométrico
        </a>

        <!-- Enlace a la lista de usuarios -->
        <a href="{% url 'listar_usuarios_web' %}" class="nav-link text-white">
            <i class="bi bi-people-fill"></i> Lista de Usuarios
        </a>

        <!-- Enlace a la lista de eventos -->
        <a href="{% url 'listar_eventos' %}" class="nav-link text-white">
            <i class="bi bi-calendar-event"></i> Lista de Eventos
        </a>
        {% endif %}

        <!-- OPCIONES PARA TODOS -->

        <!-- Enlace a la lista de asistencias -->
        <a href="{% url 'listar_asistencias' %}" class="nav-link text-white">
            <i class="bi bi-clipboard-check"></i> Lista de Asistencia
        </a>

        {% if user.is_staff %}
        <!-- Separador para admin -->
        <hr class="border-light my-2">

        <!-- Gestión de Encargados (AL FINAL, SOLO ADMIN) -->
        <a href="{% url 'listar_encargados' %}" class="nav-link text-white">
            <i class="bi bi-person-gear"></i> Gestión de Encargados
        </a>
        {% endif %}

        <!-- Logout (ÚLTIMO) -->
        <hr class="border-light my-2">
        <form action="{% url 'logout' %}" method="post" class="d-inline">
            {% csrf_token %}
            <button type="submit" class="nav-link text-white border-0 bg-transparent w-100 text-start">
                <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
            </button>
        </form>
    </nav>
</div>

<style>
    /* Estilo para hacer clickeable todo el header del sidebar */
    .sidebar-header-link {
        display: block;
        transition: background 0.3s ease;
    }

    .sidebar-header-link:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .sidebar-header-link h2 {
        transition: transform 0.3s ease;
    }

    .sidebar-header-link:hover h2 {
        transform: scale(1.05);
    }

    /* Usuario info */
    .user-info {
        background: rgba(0, 0, 0, 0.2);
    }

    .user-info small {
        display: block;
        font-size: 11px;
    }

    .user-info div {
        font-size: 14px;
        margin: 3px 0;
    }
</style>